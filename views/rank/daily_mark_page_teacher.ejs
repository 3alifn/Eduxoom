<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Mark</title>


    <%- include("../component/metadata.html") %>

</head>

<body onload="pageLoadingTop()">

    <%- include("../component/user-header-nav.html") %>
        <%- include("../component/teacher-offcanvas-nav.html") %>

            <div class="p-2 mt-5 row">

                <center class="mt-3">
                    <h6>Daily mark system</h6>
                    <code class="fw-semibold" id="syncTime"><%=today%></code>
                </center>


                <div class="col-10 col-md-6 mt-2 m-auto">
                    <input class=" form-dev p-2 ps-3 border-0" style="background-color: rgba(211, 207, 207, 0.26);"
                        type="search" name="" placeholder="Search in page" id="search">

                </div>

            </div>


            <div class="row mt-1 mbx p-2 shadowx">

                <div class="col-12 col-md-8 m-auto p-2" id="list">


                    <% for(let index=0; index<info.length; index++) {%>

                        <ul class="list-group findcard mt-2" id="list">
                            <li class="list-group-item list-group-item-light shadow">
                                <img src="/image/student/resized/<%=info[index].avatar%>" height="30px" class=" rounded"
                                    width="40px" alt="">

                                <span class="  bg-light text-muted">(<%=info[index].class%> - <%=info[index].section%> - <%=info[index].roll%>)
                                </span>
                                <span class="  bg-light text-dark">
                                   <%=info[index].name%> 
                                </span>
                                <hr> <span class=" btn-lg  badge bg-light text-dark">Behavior</span> <br>
                              
                                <div class=" btn-group btn-group-sm ">

                                    <button onclick="post_mark_def('behavior', 'b1', 'rmb', -1.666, '<%=info[index].student_uuid%>', '<%=info[index].name%>', '<%=info[index].roll%>', '<%=info[index].avatar%>')" class="b1_<%=info[index].student_uuid%> rmb btn btn-danger fs-3 bg-light text-danger ">&#10030;</button>

                                    <button onclick="post_mark_def('behavior', 'b2', 'rmb', 0.666, '<%=info[index].student_uuid%>', '<%=info[index].name%>', '<%=info[index].roll%>', '<%=info[index].avatar%>')" class="b2_<%=info[index].student_uuid%> rmb btn btn-primary fs-3 bg-light text-primary">&#10030;&#10030;</button>
                                   
                                    <button onclick="post_mark_def('behavior', 'b3', 'rmb', 1.666, '<%=info[index].student_uuid%>', '<%=info[index].name%>', '<%=info[index].roll%>', '<%=info[index].avatar%>')" class="b3_<%=info[index].student_uuid%> rmb btn btn-success fs-3 bg-light text-success ">&#10030;&#10030;&#10030;</button>

                                </div>

                                <hr> <span class=" btn-lg  badge bg-light text-dark">Uniform</span> <br>
                            
                                <div class=" btn-group btn-group-sm ">

                                    <button onclick="post_mark_def('uniform', 'u1', 'rmu', -1.555, '<%=info[index].student_uuid%>',  '<%=info[index].name%>', '<%=info[index].roll%>', '<%=info[index].avatar%>',)" class="u1_<%=info[index].student_uuid%> rmu btn btn-danger fs-3 bg-light  text-danger ">&#10026;</button>
                                   
                                    <button onclick="post_mark_def('uniform', 'u2', 'rmu', 0.555, '<%=info[index].student_uuid%>',  '<%=info[index].name%>', '<%=info[index].roll%>', '<%=info[index].avatar%>',)"  class="u2_<%=info[index].student_uuid%> rmu btn btn-primary fs-3 bg-light text-primary">&#10026;&#10026;</button>
                                 
                                    <button onclick="post_mark_def('uniform', 'u3', 'rmu', 1.555, '<%=info[index].student_uuid%>', '<%=info[index].name%>', '<%=info[index].roll%>', '<%=info[index].avatar%>',)"  class="u3_<%=info[index].student_uuid%> rmu btn btn-success fs-3 bg-light text-success ">&#10026;&#10026;&#10026;</button>
                                </div>


                                <hr> <span class=" btn-lg  badge bg-light text-dark">Study</span> <br>
                          
                                <div class=" btn-group btn-group-sm ">

                                    <button onclick="post_mark_def('study', 's1', 'rms', -1.333, '<%=info[index].student_uuid%>', '<%=info[index].name%>', '<%=info[index].roll%>', '<%=info[index].avatar%>',)" class="s1_<%=info[index].student_uuid%> rms btn btn-danger fs-3 bg-light text-danger ">&#x2730;</button>

                                    <button onclick="post_mark_def('study', 's2', 'rms', 0.333,'<%=info[index].student_uuid%>', '<%=info[index].name%>', '<%=info[index].roll%>', '<%=info[index].avatar%>',)" class="s2_<%=info[index].student_uuid%> rms btn btn-primary fs-3 bg-light text-primary">&#x2730;&#x2730; </button>
                                 
                                    <button onclick="post_mark_def('study', 's3', 'rms', 1.333, '<%=info[index].student_uuid%>', '<%=info[index].name%>', '<%=info[index].roll%>', '<%=info[index].avatar%>',)" class="s3_<%=info[index].student_uuid%> rms btn btn-success fs-3  bg-light text-success ">&#x2730;&#x2730;&#x2730;</button>

                                </div>
                            </li>


                        </ul>

                        <% } %>

                </div>
            </div>


           <%- include("../component/___node.html") %>


<script>
$(document).ready(function () {
$("#search").keyup(function () {
var value = $(this).val().toLowerCase();
$(".list-group").filter(function () {

$(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
});
 });
 });

function post_mark_def(column, cls, rm, mark, sid, name, roll, avatar){
   const class_name= '<%=class_name%>';
   const section_name= '<%=section_name%>';
   console.log(cls);
   $.ajax({
    type: "post",
    url: "/teacher/rank/mark/post/",
    data: {class_name, section_name, column, mark, sid, name, roll, avatar},
    dataType: "JSON",
    beforeSend: ()=>{
    },
    success: function (res) {
    if(res.msg==true){
     $(`.${rm}`).removeClass('disabled bg-dark')
     $(`.${cls}_${sid}`).addClass('disabled bg-dark')
    }

    }
   });
}

 </script>

</body>


</html>