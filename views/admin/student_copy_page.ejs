<%- include("../component/header") %> 


<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Management</title>

    <%- include("../component/app") %> 



</head>

<body class=" container">


    <div class="row">
        <%-include("./admin_panel") %> 


        <div class="col">


            
    <%- include("../component/toast_alive") %>
    <%- include("../component/modal_danger") %>
    <%- include("../component/modal_success") %>

    <%- include("../component/profile_info") %> 


<div class="row">
    <div class=" w-50 mt-2 m-auto">
        <input class=" form-dev p-2 border-0" style="background-color: rgba(211, 207, 207, 0.26);"  type="search" name="" placeholder="Example: 140044" id="search">
    
    </div>


    <div class="row">
        
    <div class="col-6 m-auto">

        <select name="classBase" id="classBase" class="w-100 form-self">

     
            <optgroup label="Class Ten">
               <option value="Ten-A">Ten - A</option>
               
               <option value="Ten-B">Ten - B</option>
               <option value="Ten-C">Ten - C</option>
              </optgroup>
             
              <optgroup label="Class Nine">
               <option value="Nine-A">Nine - A</option>
               <option value="Nine-B">Nine - B</option>
               <option value="Nine-C">Nine - C</option>
              </optgroup>
             
             
              
              <optgroup label="Class Eight">
               <option value="Eight-A">Eight - A</option>
               <option value="Eight-B">Eight - B</option>
               <option value="Eight-C">Eight - C</option>
              </optgroup>
             
             
             
              
              <optgroup label="Class Seven">
               <option value="Seven-A">Seven - A</option>
               <option value="Seven-B">Seven - B</option>
               <option value="Seven-C">Seven - C</option>
              </optgroup>
              
             
             
             
              
              <optgroup label="Class Six">
               <option value="Six-A">Six - A</option>
               <option value="Six-B">Six - B</option>
               <option value="Six-C">Six - C</option>
              </optgroup>
              
           
           </select>

    </div>
    </div>
  

</div>

<form action="" method="post" id="dataForm">
    <center>
        <button type="button" class=" rounded" >
            <span class=" badge btn-danger " id="selectAll">Select All</span>
        </button> 

        <button type="submit" class=" rounded " >
            <span  class=" badge btn-danger " data-toggle="modal"  data-target="#modelId">Delete</span>
        </button> 
    </center>
    <p></p>


    <div class="row">
        <div class="col-9 m-auto">
            
    <ul class="list-group" id="listDataPrint">

   


    </ul>

        </div>
    </div>

</form>



    
    

</body>

<script>

$(document).on("click", ".defInfo", (e)=>{
  let ID= e.currentTarget.attributes[0].value;
  $.ajax({
  type: "post",
  url: "/admin/student/copy/profile",
  data: {ID},
  dataType: "JSON",
  beforeSend: function(){

  },
  success: function (info) {
    
    setTimeout(() => {
      $("#profileInfo").html(info.html)
     $("#avatarpng").attr("src", `/image/student/${info.avatar}`)
  
    }, 1000);
     $("#profileTrigger").click()
  }
});
})





$(document).on("click", ".accept", (e)=>{
  let ID= e.currentTarget.attributes[0].value;
   
$("#confirmedAccept").click(()=>{

  $.ajax({
  type: "post",
  url: "/admin/student/copy/post",
  data: {ID},
  dataType: "JSON",
  beforeSend: function(){

  },
  success: function (info) {
    $("#msg").addClass(info.alert).text(info.msg)

   loadDisplay()
        

    toast_alive()
 
  }
});

});

})

    


$('#eye-hide').click(()=>{
    $('#password').attr('type', "text")
    $('#eye-hide').css({'display': 'none'})
    $('#eye-show').css({'display': 'block'})
})


$('#eye-show').click(()=>{
    $('#password').attr('type', "password")
    $('#eye-hide').css({'display': 'block'})
    $('#eye-show').css({'display': 'none'})
})


$("#selectAll").on("click", ()=>{
    if($("#selectAll").children().text()=="Select All") $("#selectAll").children().text("Unselect")
    else $("#selectAll").children().text("Select All")

    $("input[type=checkbox]").click()
})




$(document).ready(function(){
  $("#search").keyup(function() {
    var value = $(this).val().toLowerCase();
    $("tbody tr").filter(function() {
       
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
     
    });
  });
});





$("#dataForm").on("submit", (e)=>{

    e.preventDefault();

     
  $("#confirmed").click(()=>{

    $.ajax({
        method: "post",
        url: "/admin/student/copy/delete",
        data: $("#dataForm").serialize(),
        dataType: "JSON",
        success: function (info) {

            // $("#classBase").click()
     $("#msg").addClass(info.alert).text(info.msg)

loadDisplay()
        

toast_alive()
            
        }
    });

 
})

   

})





$("#classBase").on("click", ()=>{
    let value= $("#classBase").val().split("-");
    let className= value[0];
    let sectionName= value[1];

    $.ajax({
        type: "post",
        url: "/admin/student/copy/get",
        data: {className, sectionName},
        dataType: "JSON",
        success: function (info) {
            
            $("#listDataPrint").html(info.list)

        }
    });
})


function loadDisplay(){
    let value= $("#classBase").val().split("-");
    let className= value[0];
    let sectionName= value[1];

    $.ajax({
        type: "post",
        url: "/admin/student/copy/get",
        data: {className, sectionName},
        dataType: "JSON",
        success: function (info) {
            
            $("#listDataPrint").html(info.list)

        }
    });
}

loadDisplay()





</script>

</html>